@import "tailwindcss";

/* ─── Tier Theme: CSS Custom Property Defaults ────────────────────────────── */
/* These are the Free tier defaults. applyTierTheme() in tierTheme.js
   overwrites them at runtime for Pro / Business / Master tiers.
   Transition below ensures smooth color animation on tier change.        */
:root {
  --orb-1: #4f46e5;
  --orb-2: #7c3aed;
  --orb-3: #db2777;
  --accent-from: #3b82f6;
  --accent-to: #9333ea;
  --nav-active-bg: rgba(255,255,255,0.1);
  --nav-active-text: #ffffff;
  --nav-active-icon: #60a5fa;
  --card-border: rgba(255,255,255,0.05);
  --sidebar-border: rgba(255,255,255,0.05);
  --avatar-from: #3b82f6;
  --avatar-to: #9333ea;
  --selection: rgba(168,85,247,0.3);
  --bg-radial: rgba(30,58,138,0.2);
  --scrollbar: rgb(55,65,81);
  --cta-shadow: rgba(59,130,246,0.2);
  --topbar-accent: transparent;
  --theme-transition-duration: 0.8s;

  /* ─── Extended tokens for full-page theming ───── */
  --glass-bg: rgba(17,24,39,0.6);          /* glass-dark panel bg */
  --glass-border: rgba(255,255,255,0.05);  /* glass-dark border */
  --card-hover-bg: rgba(31,41,55,0.5);     /* card hover state */
  --stat-icon-bg: rgba(59,130,246,0.2);    /* stat card icon bg */
  --stat-icon-color: #60a5fa;              /* stat card icon color */
  --progress-from: #3b82f6;               /* progress bar start */
  --progress-to: #9333ea;                 /* progress bar end */
  --heading-color: #ffffff;               /* h1/h2 text */
  --subtext-color: #9ca3af;               /* secondary text */
  --sidebar-bg: rgba(17,24,39,0.95);      /* sidebar background */
  --sidebar-logo-text: linear-gradient(to right, #ffffff, #9ca3af);
  --topbar-bg: rgba(3,7,18,0.8);          /* topbar background */
  --divider-color: rgba(255,255,255,0.05); /* dividers */
  --input-border: rgba(55,65,81,1);       /* input borders */
  --input-focus: rgba(59,130,246,0.5);    /* input focus ring */
}

/* ─── @property Registrations (enables smooth color transitions) ──────── */
/* Without @property, custom property changes snap instantly.
   With it, browsers interpolate the color over the transition duration.   */
@property --orb-1     { syntax: '<color>'; inherits: true; initial-value: #4f46e5; }
@property --orb-2     { syntax: '<color>'; inherits: true; initial-value: #7c3aed; }
@property --orb-3     { syntax: '<color>'; inherits: true; initial-value: #db2777; }
@property --accent-from { syntax: '<color>'; inherits: true; initial-value: #3b82f6; }
@property --accent-to   { syntax: '<color>'; inherits: true; initial-value: #9333ea; }
@property --nav-active-bg   { syntax: '<color>'; inherits: true; initial-value: rgba(255,255,255,0.1); }
@property --nav-active-text { syntax: '<color>'; inherits: true; initial-value: #ffffff; }
@property --nav-active-icon { syntax: '<color>'; inherits: true; initial-value: #60a5fa; }
@property --card-border     { syntax: '<color>'; inherits: true; initial-value: rgba(255,255,255,0.05); }
@property --sidebar-border  { syntax: '<color>'; inherits: true; initial-value: rgba(255,255,255,0.05); }
@property --avatar-from { syntax: '<color>'; inherits: true; initial-value: #3b82f6; }
@property --avatar-to   { syntax: '<color>'; inherits: true; initial-value: #9333ea; }
@property --selection   { syntax: '<color>'; inherits: true; initial-value: rgba(168,85,247,0.3); }
@property --bg-radial   { syntax: '<color>'; inherits: true; initial-value: rgba(30,58,138,0.2); }
@property --scrollbar   { syntax: '<color>'; inherits: true; initial-value: rgb(55,65,81); }
@property --cta-shadow  { syntax: '<color>'; inherits: true; initial-value: rgba(59,130,246,0.2); }
@property --glass-bg        { syntax: '<color>'; inherits: true; initial-value: rgba(17,24,39,0.6); }
@property --glass-border    { syntax: '<color>'; inherits: true; initial-value: rgba(255,255,255,0.05); }
@property --card-hover-bg   { syntax: '<color>'; inherits: true; initial-value: rgba(31,41,55,0.5); }
@property --stat-icon-bg    { syntax: '<color>'; inherits: true; initial-value: rgba(59,130,246,0.2); }
@property --stat-icon-color { syntax: '<color>'; inherits: true; initial-value: #60a5fa; }
@property --progress-from   { syntax: '<color>'; inherits: true; initial-value: #3b82f6; }
@property --progress-to     { syntax: '<color>'; inherits: true; initial-value: #9333ea; }
@property --heading-color   { syntax: '<color>'; inherits: true; initial-value: #ffffff; }
@property --subtext-color   { syntax: '<color>'; inherits: true; initial-value: #9ca3af; }
@property --sidebar-bg      { syntax: '<color>'; inherits: true; initial-value: rgba(17,24,39,0.95); }
@property --topbar-bg       { syntax: '<color>'; inherits: true; initial-value: rgba(3,7,18,0.8); }
@property --divider-color   { syntax: '<color>'; inherits: true; initial-value: rgba(255,255,255,0.05); }
@property --input-border    { syntax: '<color>'; inherits: true; initial-value: rgba(55,65,81,1); }
@property --input-focus     { syntax: '<color>'; inherits: true; initial-value: rgba(59,130,246,0.5); }

/* Smooth transition on all registered properties */
:root {
  transition:
    --orb-1 var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --orb-2 var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --orb-3 var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --accent-from var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --accent-to var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --nav-active-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --nav-active-text var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --nav-active-icon var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --card-border var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --sidebar-border var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --avatar-from var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --avatar-to var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --selection var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --bg-radial var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --scrollbar var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --cta-shadow var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --glass-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --glass-border var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --card-hover-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --stat-icon-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --stat-icon-color var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --progress-from var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --progress-to var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --heading-color var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --subtext-color var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --sidebar-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --topbar-bg var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --divider-color var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --input-border var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1),
    --input-focus var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1);
}


@layer utilities {
  .glass {
    @apply bg-white/10 backdrop-blur-lg border border-white/20;
  }
  .glass-dark {
    @apply bg-gray-900/60 backdrop-blur-xl border border-gray-700/50;
  }
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500;
  }
  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient 8s ease infinite;
  }
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Cosmic Glass Utilities */
  .cosmic-glass {
    @apply bg-gray-900/40 backdrop-blur-2xl border border-white/5 shadow-xl;
  }

  .glass-dock {
    @apply bg-gray-950/60 backdrop-blur-xl border-r border-white/5;
  }

  .glass-card {
    @apply bg-gray-900/40 backdrop-blur-xl border border-white/5 rounded-2xl transition-all duration-300;
  }

  .glass-card:hover {
    @apply bg-gray-800/50 border-white/10 shadow-lg shadow-purple-500/5 -translate-y-1;
  }
}

/* Mesh Gradient Animation */
.mesh-gradient-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  background-color: #030712;
  background-image:
    radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
    radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
    radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
  overflow: hidden;
}

.mesh-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.4;
  animation: float 20s infinite ease-in-out;
}

.orb-1 {
  top: -10%;
  left: -10%;
  width: 50vw;
  height: 50vw;
  background: var(--orb-1);
  animation-delay: 0s;
}

.orb-2 {
  bottom: -10%;
  right: -10%;
  width: 50vw;
  height: 50vw;
  background: var(--orb-2);
  animation-delay: -5s;
}

.orb-3 {
  top: 40%;
  left: 40%;
  width: 30vw;
  height: 30vw;
  background: var(--orb-3);
  animation-delay: -10s;
}

/* Master Admin orb overrides now handled by tierTheme.js (master entry) */

@keyframes float {
  0% {
    transform: translate(0, 0) rotate(0deg);
  }
  33% {
    transform: translate(30px, -50px) rotate(10deg);
  }
  66% {
    transform: translate(-20px, 20px) rotate(-5deg);
  }
  100% {
    transform: translate(0, 0) rotate(0deg);
  }
}

/* Optimize animations for performance */
.mesh-orb {
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Toast animations */
@keyframes toast-enter {
  0% {
    opacity: 0;
    transform: translateX(100%) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

@keyframes toast-leave {
  0% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(100%) scale(0.9);
  }
}

@keyframes toast-shrink {
  0% {
    width: 100%;
  }
  100% {
    width: 0%;
  }
}

@keyframes toast-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-toast-enter {
  animation: toast-enter 0.35s cubic-bezier(0.21, 1.02, 0.73, 1) forwards;
}

.animate-toast-leave {
  animation: toast-leave 0.3s cubic-bezier(0.06, 0.71, 0.55, 1) forwards;
}

.animate-shrink {
  animation: toast-shrink linear forwards;
}

.animate-toast-pulse {
  animation: toast-pulse 1.5s ease-in-out infinite;
}

/* Enhanced toast animations */
@keyframes shimmer {
  0% {
    opacity: 0.8;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.8;
  }
}

@keyframes icon-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-icon-pop {
  animation: icon-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Modal animations */
@keyframes fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes modal-in {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(10px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out forwards;
}

.animate-modal-in {
  animation: modal-in 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Alternating text animation */
@keyframes text-alternate {
  0%,
  45% {
    opacity: 1;
  }
  50%,
  95% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes text-alternate-reverse {
  0%,
  45% {
    opacity: 0;
  }
  50%,
  95% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.animate-text-alternate {
  animation: text-alternate 3s ease-in-out infinite;
}

.animate-text-alternate-reverse {
  position: absolute;
  left: 0;
  animation: text-alternate-reverse 3s ease-in-out infinite;
}

body {
  @apply bg-gray-950 text-gray-100;
}

/* Modal scroll lock - prevents background scroll while modal is open */
body[data-modal-open='true'] {
  overflow: hidden !important;
  touch-action: none;
  overscroll-behavior: none;
  position: fixed;
  width: 100%;
}

/* Ensure modal content can still scroll */
body[data-modal-open='true'] [data-modal-content] {
  touch-action: pan-y;
  overscroll-behavior: contain;
}

/* Contain overscroll in all scrollable modal areas */
body[data-modal-open='true'] [data-modal-content] * {
  overscroll-behavior: contain;
}

/* Style for scrollable areas in modals */
[data-modal-content] .overflow-y-auto,
[data-modal-content] .overflow-auto {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* Custom scrollbar styles */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-thumb-gray-700::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.scrollbar-thumb-gray-700::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thumb-gray-700::-webkit-scrollbar-thumb {
  background-color: rgb(55 65 81);
  border-radius: 4px;
}

.scrollbar-thumb-gray-700::-webkit-scrollbar-thumb:hover {
  background-color: rgb(75 85 99);
}

/* Hide scrollbar but allow scrolling on mobile */
@media (max-width: 768px) {
  .scrollbar-thin {
    scrollbar-width: none;
  }
  .scrollbar-thin::-webkit-scrollbar {
    display: none;
  }
}

/* Custom Scrollbar for Modals */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgb(55 65 81) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgb(55 65 81);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgb(75 85 99);
}

/* Fix datetime-local input overflow on mobile */
input[type='datetime-local'] {
  max-width: 100%;
  box-sizing: border-box;
  -webkit-appearance: none;
  appearance: none;
}

/* Ensure datetime picker doesn't overflow container */
@media (max-width: 640px) {
  input[type='datetime-local'] {
    font-size: 14px;
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* ─── Tier Badge Styles ───────────────────────────────────────────────────── */
/* To restyle a badge: change the gradient + shadow here.                     */

.tier-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 0.6rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  position: relative;
  overflow: hidden;
  white-space: nowrap;
}

/* Shimmer sweep (shared by all tiers) */
.tier-badge::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.25) 50%,
    transparent 100%
  );
  animation: badge-shimmer 3s ease-in-out infinite;
}

@keyframes badge-shimmer {
  0%   { left: -100%; }
  50%  { left: 100%; }
  100% { left: 100%; }
}

/* Pro badge — Violet */
.badge-pro {
  background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
  color: #e9d5ff;
  box-shadow: 0 0 8px rgba(124,58,237,0.4);
}

/* Business badge — Gold */
.badge-business {
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
  color: #fef3c7;
  box-shadow: 0 0 8px rgba(217,119,6,0.4);
}

/* Master Admin badge — Crimson */
.badge-master {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  color: #fecaca;
  box-shadow: 0 0 8px rgba(220,38,38,0.4);
}

/* ─── Upgrade Celebration Glow ────────────────────────────────────────────── */
/* Applied briefly to the sidebar user card on tier upgrade.                  */

@keyframes tier-upgrade-glow {
  0%   { box-shadow: 0 0 0  rgba(var(--accent-from), 0); }
  30%  { box-shadow: 0 0 20px var(--accent-from), 0 0 40px var(--accent-to); }
  100% { box-shadow: 0 0 0  rgba(var(--accent-from), 0); }
}

.upgrade-celebrate {
  animation: tier-upgrade-glow 2s ease-out forwards;
}

/* Topbar accent line — visible only for paid tiers */
.topbar-accent-line {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--topbar-accent);
  transition: background var(--theme-transition-duration) cubic-bezier(0.4, 0, 0.2, 1);
}
